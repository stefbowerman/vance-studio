{% assign add_to_cart = 'Add to cart' %}
{% assign sold_out    = 'Sold Out' %}
{% assign unavailable = 'Unavailable' %}
{% assign photo_main_dimension = '900x' %}
{% assign photo_zoom_dimension = '1200x' %}

<div class="main-column">
  <div class="product" itemscope itemtype="http://schema.org/Product">

    <div class="product-photos">
  
    {% if product.images.size == 0 %}
  
      <div class="product-photo__main">
        <img src="{{ '' | img_url: 'grande' }}" alt="" />
      </div>
    
    {% else %}
    
      {% assign featured_image = product.selected_or_first_available_variant.featured_image | default: product.featured_image %}
      <div class="product-photo__main">
        <div class="click-shield"></div>
        <a href="{{ featured_image | img_url: photo_zoom_dimension }}">
          <img src="{{ featured_image | img_url: photo_main_dimension }}" alt="{{ product.title | escape }}" />
        </a>
      </div>

      {% if product.images.size > 1 %}
      <ul class="product-photo-thumbs">
        {% for image in product.images %}
        <li class="product-photo-thumb">
          <a href="{{ image | img_url: photo_main_dimension }}" data-zoom="{{ image | img_url: photo_zoom_dimension }}">
            <img src="{{ image | img_url: '110x' }}" alt="{{ image.alt | escape }}" />
          </a>
        </li>
        {% endfor %}
      </ul>
      {% endif %}
    
    {% endif %}

    </div><!-- .product-photos -->

    <div class="product-details" itemprop="offers" itemscope itemtype="http://schema.org/Offer">
      {% comment %}
        Get first variant, or deep linked one
      {% endcomment %}
      {% assign variant = product.selected_or_first_available_variant %}
      
      <meta itemprop="url" content="{{ shop.url }}{{ product.url }}">
      <meta itemprop="image" content="{{ product.featured_image.src | img_url: 'grande' }}">
      <meta itemprop="priceCurrency" content="{{ shop.currency }}">
      <meta itemprop="price" content="{{ variant.price | money }}">

      <link itemprop="availability" href="http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}">

      <h1 itemprop="name" class="product-details__title">{{ product.title }}</h1>
      
      <div id="product-price" class="product-details__price">
        <span class="product-price" data-convert-money itemprop="price">{{ variant.price | money }}</span>
        <span class="product-compare-price" data-convert-money>
          {% if product.compare_at_price > product.price %}{{ variant.compare_at_price | money }}{% endif %}
        </span>
      </div>
      
      {% assign hide_default_title = false %}
      {% if product.variants.size == 1 and product.variants.first.title contains 'Default' %}
        {% assign hide_default_title = true %}
      {% endif %}

      <form action="/cart/add" method="post" enctype="multipart/form-data">   

        <div id="product-variants" class="{% if hide_default_title %} hidden{% endif %}">
          <select id="product-select" name="id" class="form-control">
          {% for variant in product.variants %}
            <option{% if variant == product.selected_or_first_available_variant %} selected{% endif %} value="{{ variant.id }}">
            {{ variant.title }}
            </option>
          {% endfor %}
          </select>
        </div>        
          
        <div id="product-add">
          <input type="submit" name="add" id="add" class="button button--addtocart" value="Add to Bag">
        </div>

      </form>

      <div id="product-description" class="product-details__description rte" itemprop="description">
        {{ product.description }}
      </div>
      
    </div><!-- .product-details -->

  </div>
</div>

<div class="product-blowup">
  <div class="product-blowup__scroll">
    <img class="product-blowup__image" />
  </div>
  <a href="#" class="product-blowup__close" title="Close">&times;</a>
</div>

{{ 'option_selection.js' | shopify_asset_url | script_tag }}

<script>

  window.ProductPageConfig = {
    product: {{ product | json }},
    moneyFormat: {{shop.money_format | json }},
    photoMainDimenion: {{ photo_main_dimension | json }},
    msg: {
      addToCart: {{ add_to_cart | json }},
      soldOut: {{ sold_out | json }},
      unavailable: {{ unavailable | json }}
    }
  };

</script>